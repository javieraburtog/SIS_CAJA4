"use strict";(self.webpackChunkGCPCAJAANG=self.webpackChunkGCPCAJAANG||[]).push([[523],{1269:(T,j,g)=>{g.d(j,{X:()=>l});var E=g(177),C=g(2886),e=g(4438);let l=(()=>{class b{static#e=this.\u0275fac=function(s){return new(s||b)};static#t=this.\u0275mod=e.$C({type:b});static#n=this.\u0275inj=e.G2t({imports:[E.MD,C.UN]})}return b})()},6523:(T,j,g)=>{g.r(j),g.d(j,{LineasisdocModule:()=>X});var E=g(177),C=g(921),e=g(4438),l=g(385),b=g(5473),o=g(8505),i=g(467),s=g(5254),d=g(2886),p=g(7670),_=g(3020),f=g(5874),D=g(5122),P=g(1626),u=g(5312);let y=(()=>{class c{constructor(t,r,n){this.httpClient=t,this.route=r,this.storage=n}consultarLineasNegocio(){this.route.queryParams.subscribe(n=>{null==n.id?this.usernameParam=this.storage.get("username"):(console.log("Leer username param en url: ",n.id),this.usernameParam=n.id)});let t={parameters:[this.usernameParam,u.c.NOMBRE_APPLICACION]};console.log(t);let r={headers:new P.Lr({"Content-Type":u.c.CONTENT_TYPE,"GCP-API-KEY":u.c.GCP_API_KEY,"APP-MOD-CODE":u.c.APP_MOD_CODE,"APP-CODE":u.c.APP_CODE,parametros:JSON.stringify(t)})};return this.httpClient.get(u.c.GCPCAJAWSREST_URL+u.c.CONTEXTO_WS_CONFIG_UNINEGREST+"/consultarLineasNegocio",r)}consultarTodo(t,r){this.route.queryParams.subscribe(h=>{null==h.id?this.usernameParam=this.storage.get("username"):(console.log("Leer username param en url: ",h.id),this.usernameParam=h.id)});let n={parameters:[t,r,this.usernameParam,u.c.NOMBRE_APPLICACION]};console.log(n);let a={headers:new P.Lr({"Content-Type":u.c.CONTENT_TYPE,"GCP-API-KEY":u.c.GCP_API_KEY,"APP-MOD-CODE":u.c.APP_MOD_CODE,"APP-CODE":u.c.APP_CODE,parametros:JSON.stringify(n)})};return this.httpClient.get(u.c.GCPCAJAWSREST_URL+u.c.CONTEXTO_WS_CONFIG_LINEASISDOC+"/consultarTodo",a)}actualizar(t,r,n,a,h,m,S,F){let M=JSON.stringify([{identificador:{parameters:[t.toString()]}},{codigolinea:{parameters:[r]}},{sistema:{parameters:[n]}},{tipodoc:{parameters:[a]}},{reqnodocumento:{parameters:[h]}},{reqhojaneg:{parameters:[m]}},{reqcodcliente:{parameters:[S]}},{estado:{parameters:[F]}},{usuarioCrea:{parameters:[this.storage.get("username")]}},{aplicacion:{parameters:[u.c.NOMBRE_APPLICACION]}}]),L={headers:new P.Lr({"Content-Type":u.c.CONTENT_TYPE,"GCP-API-KEY":u.c.GCP_API_KEY,"APP-MOD-CODE":u.c.APP_MOD_CODE,"APP-CODE":u.c.APP_CODE})};return this.httpClient.put(u.c.GCPCAJAWSREST_URL+u.c.CONTEXTO_WS_CONFIG_LINEASISDOC+"/actualizar",M,L)}insertar(t,r,n,a,h,m,S){let F=JSON.stringify({parameters:[t]}),M=JSON.stringify({parameters:[r]}),L=JSON.stringify({parameters:[n]}),H=JSON.stringify({parameters:[a]}),U=JSON.stringify({parameters:[h]}),K=JSON.stringify({parameters:[m]}),W=JSON.stringify({parameters:[S]}),Q=JSON.stringify({parameters:[this.storage.get("username")]}),Z=JSON.stringify({parameters:[u.c.NOMBRE_APPLICACION]}),ee={headers:new P.Lr({"Content-Type":u.c.CONTENT_TYPE,"GCP-API-KEY":u.c.GCP_API_KEY,"APP-MOD-CODE":u.c.APP_MOD_CODE,"APP-CODE":u.c.APP_CODE,codigolinea:F,sistema:M,tipodoc:L,reqnodocumento:H,reqhojaneg:U,reqcodcliente:K,estado:W,usuarioCrea:Q,aplicacion:Z})};return this.httpClient.post(u.c.GCPCAJAWSREST_URL+u.c.CONTEXTO_WS_CONFIG_LINEASISDOC+"/insertar",JSON.stringify("{}"),ee)}eliminar(t){this.route.queryParams.subscribe(a=>{null==a.id?this.usernameParam=this.storage.get("username"):(console.log("Leer username param en url: ",a.id),this.usernameParam=a.id)});let r={parameters:[t.toString(),this.usernameParam,u.c.NOMBRE_APPLICACION]};console.log(r);let n={headers:new P.Lr({"Content-Type":u.c.CONTENT_TYPE,"GCP-API-KEY":u.c.GCP_API_KEY,"APP-MOD-CODE":u.c.APP_MOD_CODE,"APP-CODE":u.c.APP_CODE,parametros:JSON.stringify(r)})};return this.httpClient.delete(u.c.GCPCAJAWSREST_URL+u.c.CONTEXTO_WS_CONFIG_LINEASISDOC+"/eliminar",n)}static#e=this.\u0275fac=function(r){return new(r||c)(e.KVO(P.Qq),e.KVO(C.nX),e.KVO(p.vb))};static#t=this.\u0275prov=e.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var O=g(8326);function R(c,N){if(1&c){const t=e.RV6();e.j41(0,"tr",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),h=e.sdS(58);return a.onRowClic(n.identificador,n.codigolinea,n.sistema,n.tipodoc,n.reqnodocumento,n.reqhojaneg,n.reqcodcliente,n.estado),e.Njj(a.open(h))}),e.j41(1,"td"),e.nrm(2,"ngb-highlight",28),e.k0s(),e.j41(3,"td"),e.nrm(4,"ngb-highlight",28),e.k0s(),e.j41(5,"td"),e.nrm(6,"ngb-highlight",28),e.k0s(),e.j41(7,"td"),e.nrm(8,"ngb-highlight",28),e.k0s(),e.j41(9,"td"),e.nrm(10,"ngb-highlight",28),e.k0s(),e.j41(11,"td"),e.nrm(12,"ngb-highlight",28),e.k0s(),e.j41(13,"td"),e.nrm(14,"ngb-highlight",28),e.k0s()()}if(2&c){const t=N.$implicit,r=e.XpG();e.R7$(2),e.Y8G("result",t.codigolinea)("term",r.searchText),e.R7$(2),e.Y8G("result",t.sistema)("term",r.searchText),e.R7$(2),e.Y8G("result",t.tipodoc)("term",r.searchText),e.R7$(2),e.Y8G("result",r.formatearSiNo(t.reqnodocumento))("term",r.searchText),e.R7$(2),e.Y8G("result",r.formatearSiNo(t.reqhojaneg))("term",r.searchText),e.R7$(2),e.Y8G("result",r.formatearSiNo(t.reqcodcliente))("term",r.searchText),e.R7$(2),e.Y8G("result",r.formatearSiNo(t.estado))("term",r.searchText)}}function A(c,N){1&c&&e.EFF(0,"<<")}function v(c,N){1&c&&e.EFF(0,">>")}function k(c,N){1&c&&(e.j41(0,"div",29)(1,"span",30),e.EFF(2,"Cargando..."),e.k0s()())}function I(c,N){if(1&c&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&c){const t=N.$implicit;e.FS9("value",t.drky),e.R7$(),e.Lme(" ",t.drky,"-",t.drdl01.trim()," ")}}function x(c,N){1&c&&(e.j41(0,"div",29)(1,"span",30),e.EFF(2,"Procesando..."),e.k0s()())}function G(c,N){if(1&c){const t=e.RV6();e.j41(0,"ngb-alert",65),e.bIt("close",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.successMessage="")}),e.EFF(1),e.k0s()}if(2&c){const t=e.XpG(2);e.R7$(),e.JRh(t.successMessage)}}function B(c,N){if(1&c){const t=e.RV6();e.j41(0,"ngb-alert",66),e.bIt("close",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.errorMessage="")}),e.EFF(1),e.k0s()}if(2&c){const t=e.XpG(2);e.R7$(),e.JRh(t.errorMessage)}}function V(c,N){if(1&c){const t=e.RV6();e.j41(0,"div",31)(1,"h4",32),e.EFF(2," Configuraci\xf3n L\xednea-Sistema-Tipo Documento "),e.k0s(),e.j41(3,"button",33),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("close"))}),e.j41(4,"span",34),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",35)(7,"form",36)(8,"div",37)(9,"div",38)(10,"div",39)(11,"div",40)(12,"label",41),e.EFF(13,"L\xednea de Negocio"),e.k0s(),e.j41(14,"select",42),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.codigoLineaEnEdicion,n)||(a.codigoLineaEnEdicion=n),e.Njj(n)}),e.DNE(15,I,2,3,"option",43),e.k0s()()(),e.j41(16,"div",39)(17,"div",40)(18,"label",44),e.EFF(19,"Sistema"),e.k0s(),e.j41(20,"div",45)(21,"input",46),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.sistemaEnEdicion,n)||(a.sistemaEnEdicion=n),e.Njj(n)}),e.k0s()()()(),e.j41(22,"div",39)(23,"div",40)(24,"label",47),e.EFF(25,"Tipo Documento"),e.k0s(),e.j41(26,"div",45)(27,"input",48),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.tipodocEnEdicion,n)||(a.tipodocEnEdicion=n),e.Njj(n)}),e.k0s()()()(),e.j41(28,"div",39)(29,"div",40)(30,"label",49),e.EFF(31,"Req. # Documento"),e.k0s(),e.j41(32,"select",50),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.reqNoDocumentoEnEdicion,n)||(a.reqNoDocumentoEnEdicion=n),e.Njj(n)}),e.j41(33,"option",51),e.EFF(34,"SI"),e.k0s(),e.j41(35,"option",52),e.EFF(36,"NO"),e.k0s()()()(),e.j41(37,"div",39)(38,"div",40)(39,"label",53),e.EFF(40,"Req. Hoja Neg."),e.k0s(),e.j41(41,"select",54),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.reqHojaNegEnEdicion,n)||(a.reqHojaNegEnEdicion=n),e.Njj(n)}),e.j41(42,"option",51),e.EFF(43,"SI"),e.k0s(),e.j41(44,"option",52),e.EFF(45,"NO"),e.k0s()()()(),e.j41(46,"div",39)(47,"div",40)(48,"label",55),e.EFF(49,"Req. Cod. Cliente"),e.k0s(),e.j41(50,"select",56),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.reqCodClienteEnEdicion,n)||(a.reqCodClienteEnEdicion=n),e.Njj(n)}),e.j41(51,"option",51),e.EFF(52,"SI"),e.k0s(),e.j41(53,"option",52),e.EFF(54,"NO"),e.k0s()()()(),e.j41(55,"div",39)(56,"div",40)(57,"label",57),e.EFF(58,"Estado"),e.k0s(),e.j41(59,"select",58),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.estadoEnEdicion,n)||(a.estadoEnEdicion=n),e.Njj(n)}),e.j41(60,"option",51),e.EFF(61,"SI"),e.k0s(),e.j41(62,"option",52),e.EFF(63,"NO"),e.k0s()()()()()()()(),e.j41(64,"div",59),e.DNE(65,x,3,0,"div",21)(66,G,2,1,"ngb-alert",60)(67,B,2,1,"ngb-alert",61),e.j41(68,"button",62),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("close"))}),e.EFF(69," Cerrar "),e.k0s(),e.j41(70,"button",63),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.btnGuardarClicked=!0,n.siGuardando=!0,e.Njj(n.guardarInformacion())}),e.EFF(71," Guardar "),e.k0s()()}if(2&c){const t=e.XpG();e.R7$(14),e.R50("ngModel",t.codigoLineaEnEdicion),e.R7$(),e.Y8G("ngForOf",t.listaLNegocio),e.R7$(6),e.R50("ngModel",t.sistemaEnEdicion),e.R7$(6),e.R50("ngModel",t.tipodocEnEdicion),e.R7$(5),e.R50("ngModel",t.reqNoDocumentoEnEdicion),e.R7$(9),e.R50("ngModel",t.reqHojaNegEnEdicion),e.R7$(9),e.R50("ngModel",t.reqCodClienteEnEdicion),e.R7$(9),e.R50("ngModel",t.estadoEnEdicion),e.R7$(6),e.Y8G("ngIf",t.siGuardando),e.R7$(),e.Y8G("ngIf",t.successMessage),e.R7$(),e.Y8G("ngIf",t.errorMessage),e.R7$(3),e.Y8G("disabled",t.btnGuardarClicked)}}function q(c,N){if(1&c){const t=e.RV6();e.j41(0,"div",31)(1,"h4",67),e.EFF(2,"Borrar registro"),e.k0s(),e.j41(3,"button",68),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.j41(4,"span",34),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",35)(7,"p")(8,"strong"),e.EFF(9,"Est\xe1 seguro de eliminar el registro?"),e.k0s()(),e.j41(10,"p")(11,"span",69),e.EFF(12,"Esta operacion no se puede deshacer."),e.k0s()()(),e.j41(13,"div",59)(14,"button",70),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("cancel click"))}),e.EFF(15," Cancelar "),e.k0s(),e.j41(16,"button",71),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.eliminarRegistro())}),e.EFF(17," Borrar "),e.k0s()()}}let z=(()=>{class c{constructor(t,r,n,a,h,m,S){this.orderPipe=t,this.pipe=r,this.configLineaSisDocService=n,this.modalService=a,this.location=h,this.route=m,this.storage=S,this._success=new s.B7,this.successMessage="",this._error=new s.B7,this.errorMessage="",this.modoEdicion=0,this.userid="",this.vista="lineasisdoc",this.closeResult="",this.page=1,this.pageSize=4,this.btnGuardarClicked=!1,this.siGuardando=!1,this.siCargandoDatos=!1,this.limiteInicial=1,this.offset=10,this.filtroTabla={$or:[{codigolinea:""},{sistema:""},{tipodoc:""}]},this.codigoAscendente=!1,this.descripcionAscendente=!0,this.columnaActual="",this.tipoOrdenPorDefecto=!1,this.onPageChange=(F,M)=>{console.log("Pagina actual",F," | Elementos por pagina: ",M," | Ultima pagina: ",Math.ceil(this.regs.length/M))}}ngOnInit(){this.userid=this.storage.get("username"),console.log("Lineasisdoc onInit"),this.route.queryParams.subscribe(t=>{console.log("Lineasisdoc onInit: usuario, vista: ",this.userid,",",t.v),this.location.replaceState("/index.html?id="+this.userid+"&v=lineasisdoc")}),this.siCargandoDatos=!0,this.configLineaSisDocService.consultarLineasNegocio().subscribe(t=>{this.listaLNegocio=t}),this.configLineaSisDocService.consultarTodo(this.limiteInicial,this.offset).subscribe(t=>{this.collectionSize=t.length,this.regs=t,this.registrosOrdenadosFiltrados=this.regs,console.log("CollectionSize: ",this.collectionSize),console.log("Data consultarPorId: ",t),this.siCargandoDatos=!1}),this._success.subscribe(t=>this.successMessage=t),this._success.pipe((0,_.B)(5e3)).subscribe(()=>this.successMessage=""),this._error.subscribe(t=>this.errorMessage=t),this._error.pipe((0,_.B)(5e3)).subscribe(()=>this.errorMessage="")}getDismissReason(t){return t===d.PQ.ESC?"by pressing ESC":t===d.PQ.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}get obtenerRegistros(){if(void 0!==this.registrosOrdenadosFiltrados)return console.log("obtenerRegistros"),this.registrosOrdenadosFiltrados.map((t,r)=>({id:r+1,...t})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onRowClic(t,r,n,a,h,m,S,F){this.modoEdicion=2,this.identificadorEnEdicion=t,this.codigoLineaEnEdicion=r,this.sistemaEnEdicion=n,this.tipodocEnEdicion=a,this.reqNoDocumentoEnEdicion=h,this.reqHojaNegEnEdicion=m,this.reqCodClienteEnEdicion=S,this.estadoEnEdicion=F}onBtnNuevoClic(){this.modoEdicion=1,this.identificadorEnEdicion=0,this.codigoLineaEnEdicion="",this.sistemaEnEdicion="",this.tipodocEnEdicion="",this.reqNoDocumentoEnEdicion=1,this.reqHojaNegEnEdicion=1,this.reqCodClienteEnEdicion=1,this.estadoEnEdicion=1}open(t){this.location.replaceState("/index.html?id="+this.userid+"&v="+this.vista),this.modalReference=this.modalService.open(t,{size:"xl",ariaLabelledBy:"modal-basic-title"}),this.modalReference.result.then(r=>{console.log("resultado: ",r),this.closeResult=`Cerrado con: ${r}`,"save"==r?console.log("Validar campos: "):console.log("Se cerro ventana. Limpiar campos en edicion")},r=>{console.log("Se cerro ventana. Limpiar campos en edidcion"),this.closeResult=`Raz\xf3n ${this.getDismissReason(r)}`})}confirmaBorrar(t){this.location.replaceState("/index.html?id="+this.userid+"&v="+this.vista),this.modalReference=this.modalService.open(t,{size:"sm",ariaLabelledBy:"modal-basic-title"}),this.modalReference.result.then(r=>{console.log("resultado: ",r),this.closeResult=`Cerrado con: ${r}`,"save"==r?console.log("Validar campos: "):console.log("Se cerro ventana. Limpiar campos en edicion")},r=>{console.log("Se cerro ventana. Limpiar campos en edidcion"),this.closeResult=`Raz\xf3n ${this.getDismissReason(r)}`})}validarCamposAntesDeGuardar(){if(!(null!=this.codigoLineaEnEdicion&&this.codigoLineaEnEdicion.length>1&&this.codigoLineaEnEdicion.indexOf(" ")<0))return this._error.next("El campo L\xednea de Negocio no puede ser vac\xedo ni puede contener espacios en blanco."),!1;if(this.codigoLineaEnEdicion.length>255)return this._error.next("Campo L\xednea de Negocios: 255 caracteres m\xe1ximo"),!1;let t=/^[a-zA-Z0-9_.-]*$/;return t.test(this.codigoLineaEnEdicion.toString())?null!=this.sistemaEnEdicion&&this.sistemaEnEdicion.length>1&&this.sistemaEnEdicion.indexOf(" ")<0?this.sistemaEnEdicion.length>255?(this._error.next("Campo Sistema no puede ser mayor a 255 caracteres"),!1):t.test(this.sistemaEnEdicion.toString())?null!=this.tipodocEnEdicion&&this.tipodocEnEdicion.length>1&&this.tipodocEnEdicion.indexOf(" ")<0?this.tipodocEnEdicion.length>100?(this._error.next("Campo T. Maestra no puede ser mayor a 50 caracteres"),!1):t.test(this.tipodocEnEdicion.toString())?(console.log(this.reqNoDocumentoEnEdicion),null==this.reqNoDocumentoEnEdicion||0!=this.reqNoDocumentoEnEdicion&&1!=this.reqNoDocumentoEnEdicion?(this._error.next("El campo Req. # Documento debe tener valor SI (0) o NO (1)"),!1):null==this.reqHojaNegEnEdicion||0!=this.reqHojaNegEnEdicion&&1!=this.reqHojaNegEnEdicion?(this._error.next("El campo Req. Hoja Neg. debe tener valor SI (0) o NO (1)"),!1):null==this.reqCodClienteEnEdicion||0!=this.reqCodClienteEnEdicion&&1!=this.reqCodClienteEnEdicion?(this._error.next("El campo Req. Cod. Cliente debe tener valor SI (0) o NO (1)"),!1):null==this.estadoEnEdicion||0!=this.estadoEnEdicion&&1!=this.estadoEnEdicion?(this._error.next("El campo Estado debe tener valor SI (0) o NO (1)"),!1):(console.log("Proceder a guardar datos"),!0)):(this._error.next("Campo Tipo Documento solamente debe tener caracteres alfanum\xe9ricos"),!1):(this._error.next("El Tipo Documento no puede ser vac\xedo ni puede contener espacios en blanco."),!1):(this._error.next("Campo Sistema solamente debe tener caracteres alfanum\xe9ricos"),!1):(this._error.next("El Sistema no puede ser vac\xedo ni puede contener espacios en blanco."),!1):(this._error.next("Campo L\xednea de Negocios solamente debe tener caracteres alfanum\xe9ricos"),!1)}guardarInformacion(){var t=this;return(0,i.A)(function*(){let r=t.validarCamposAntesDeGuardar();if(r){if(2==t.modoEdicion){let n=yield new Promise((a,h)=>{t.configLineaSisDocService.actualizar(t.identificadorEnEdicion,t.codigoLineaEnEdicion,t.sistemaEnEdicion,t.tipodocEnEdicion,t.reqNoDocumentoEnEdicion,t.reqHojaNegEnEdicion,t.reqCodClienteEnEdicion,t.estadoEnEdicion).subscribe(m=>{m.length>0&&("true"==m[0]?(t._success.next("Informacion guardada exitosamente"),t.cerrarModal(),t.modoEdicion=1,t.identificadorEnEdicion=0,t.codigoLineaEnEdicion="",t.sistemaEnEdicion="",t.tipodocEnEdicion="",t.reqNoDocumentoEnEdicion=1,t.reqHojaNegEnEdicion=1,t.reqCodClienteEnEdicion=1,t.estadoEnEdicion=1,a(!0)):(t._error.next("Error al intentar guardar informacion"),a(!1))),t.siCargandoDatos=!0,t.configLineaSisDocService.consultarTodo(t.limiteInicial,t.offset).subscribe(S=>{t.regs=S,t.siCargandoDatos=!1,t.registrosOrdenadosFiltrados=t.regs,t.collectionSize=t.registrosOrdenadosFiltrados.length})})});return t.btnGuardarClicked=!1,t.siGuardando=!1,n}if(1==t.modoEdicion){let n=yield new Promise((a,h)=>{t.configLineaSisDocService.insertar(t.codigoLineaEnEdicion,t.sistemaEnEdicion,t.tipodocEnEdicion,t.reqNoDocumentoEnEdicion,t.reqHojaNegEnEdicion,t.reqCodClienteEnEdicion,t.estadoEnEdicion).subscribe(m=>{m.length>0&&("true"==m[0]?(t._success.next("Informacion guardada exitosamente"),t.cerrarModal(),t.modoEdicion=1,t.identificadorEnEdicion=0,t.codigoLineaEnEdicion="",t.sistemaEnEdicion="",t.tipodocEnEdicion="",t.reqNoDocumentoEnEdicion=1,t.reqHojaNegEnEdicion=1,t.reqCodClienteEnEdicion=1,t.estadoEnEdicion=1,a(!0)):(t._error.next("Error al intentar guardar informacion"),a(!1))),t.siCargandoDatos=!0,t.configLineaSisDocService.consultarTodo(t.limiteInicial,t.offset).subscribe(S=>{t.regs=S,t.siCargandoDatos=!1,t.registrosOrdenadosFiltrados=t.regs,t.collectionSize=t.registrosOrdenadosFiltrados.length})})});return t.btnGuardarClicked=!1,t.siGuardando=!1,n}}return t.btnGuardarClicked=!1,t.siGuardando=!1,r})()}cerrarModal(){this.modalReference.close()}onKeySearch(){this.filtroTabla.$or[0].codigolinea=this.searchText,this.filtroTabla.$or[1].sistema=this.searchText,this.filtroTabla.$or[2].tipodoc=this.searchText;let t=this.pipe.transform(this.regs,this.filtroTabla);this.registrosOrdenadosFiltrados=t,this.paginarRegistros()}paginarRegistros(){void 0!==this.registrosOrdenadosFiltrados&&(this.registrosOrdenadosFiltrados=""===this.searchText?this.regs:this.registrosOrdenadosFiltrados.map((t,r)=>({identificador:r+1,...t})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collectionSize=this.registrosOrdenadosFiltrados.length)}onSort(t){this.columnaActual==t?(this.tipoOrdenActual=!this.tipoOrdenActual,console.log("ordenar por: ",t),this.registrosOrdenadosFiltrados=this.orderPipe.transform(this.registrosOrdenadosFiltrados,t,this.tipoOrdenActual),this.columnaActual=t):(console.log("ordenar por: ",t),this.registrosOrdenadosFiltrados=this.orderPipe.transform(this.registrosOrdenadosFiltrados,t,this.tipoOrdenPorDefecto),this.columnaActual=t,this.tipoOrdenActual=this.tipoOrdenPorDefecto)}onClicBtnEliminar(t){return null!=t&&(this.id_a_eliminar=t,!0)}eliminarRegistro(){var t=this;return(0,i.A)(function*(){(yield new Promise((n,a)=>{t.configLineaSisDocService.eliminar(t.id_a_eliminar).subscribe(h=>{h.length>0&&("true"==h[0]?(t._success.next("Registro borrado"),t.siCargandoDatos=!0,t.configLineaSisDocService.consultarTodo(t.limiteInicial,t.offset).subscribe(m=>{t.regs=m,t.siCargandoDatos=!1,t.registrosOrdenadosFiltrados=t.regs,null!=t.searchText&&null!=t.searchText&&""!=t.searchText&&(console.log("searchText: ",t.searchText),t.onKeySearch())}),n(!0)):(t._error.next("Error al intentar borrar"),n(!1)))})}))&&t.cerrarModal()})()}formatearSiNo(t){return 0==t?"NO":"SI"}static#e=this.\u0275fac=function(r){return new(r||c)(e.rXU(f.F),e.rXU(D.L),e.rXU(y),e.rXU(d.Bq),e.rXU(E.aZ),e.rXU(C.nX),e.rXU(p.vb))};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["app-cont-config-lineasisdoc"]],decls:61,vars:17,consts:[["numPages",""],["content",""],["FormConfirmarEliminar",""],[1,"divContenedor"],[1,"table-responsive",2,"max-width","99%"],[1,"container",2,"padding-bottom","1%"],[1,"row","align-items-start"],[1,"col-5","align-self-center"],[1,"col"],[1,"col-5","align-self-start",2,"padding-right","0.75%"],["type","text","name","search","placeholder","Buscar","autocomplete","off",1,"form-control","ml-2","form-control-sm","bi","bi-search",3,"keyup","ngModelChange","ngModel"],[1,"table","table-striped","table-hover","table-bordered","table-sm"],[1,"table-active"],["scope","col",3,"click"],[3,"hidden"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2",2,"padding-right","0.25% !important"],[1,"pagination",3,"pageChange","collectionSize","page","pageSize"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["class","spinner-border text-primary","role","status",4,"ngIf"],["id","itemsPerPage","name","itemsPerPage",1,"custom-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"d-flex"],[1,"ml-auto","p-2",2,"padding-right","0.25% !important"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[3,"click"],[3,"result","term"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","modalEditForm","name","modalEditForm"],[1,"container-fluid"],[1,"row"],[1,"col-md-4","col-sm-6"],[1,"form-group"],["for","codigolinea"],["id","codigolinea","name","codigolinea",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","sistema"],[1,"input-group"],["id","sistema","minlength","1","maxlength","50","placeholder","Digite sistema","name","sistema","pattern","[A-Za-z0-9]",1,"form-control",3,"ngModelChange","ngModel"],["for","tipodoc"],["id","tipodoc","name","tipodoc","minlength","1","maxlength","50","placeholder","Digite tipo documento",1,"form-control",3,"ngModelChange","ngModel"],["for","reqnodocumento"],["id","reqnodocumento","name","reqnodocumento",1,"form-control",3,"ngModelChange","ngModel"],["value","1"],["value","0"],["for","reqhojaneg"],["id","reqhojaneg","name","reqhojaneg",1,"form-control",3,"ngModelChange","ngModel"],["for","reqcodcliente"],["id","reqcodcliente","name","reqcodcliente",1,"form-control",3,"ngModelChange","ngModel"],["for","estado"],["id","estado","name","estado",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","success",3,"close",4,"ngIf"],["type","danger",3,"close",4,"ngIf"],["type","button",1,"btn","btn-outline-dark","btn-sm",3,"click"],["type","button",1,"btn","btn-success","btn-sm",3,"click","disabled"],[3,"value"],["type","success",3,"close"],["type","danger",3,"close"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],[1,"text-danger"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",3),e.nrm(1,"br"),e.j41(2,"form")(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h5"),e.EFF(8,"Configuraci\xf3n de L\xednea-Sistema-Tipo Documento"),e.k0s()(),e.nrm(9,"div",8),e.j41(10,"div",9)(11,"input",10),e.bIt("keyup",function(){return e.eBV(a),e.Njj(n.onKeySearch())}),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.searchText,m)||(n.searchText=m),e.Njj(m)}),e.k0s()()()(),e.j41(12,"table",11)(13,"thead")(14,"tr",12)(15,"th",13),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onSort("codigolinea"))}),e.EFF(16," C\xf3digo L\xednea"),e.j41(17,"span",14),e.EFF(18,"\u25bc"),e.k0s(),e.j41(19,"span",14),e.EFF(20,"\u25b2"),e.k0s()(),e.j41(21,"th",13),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onSort("sistema"))}),e.EFF(22," Sistema"),e.j41(23,"span",14),e.EFF(24,"\u25bc"),e.k0s(),e.j41(25,"span",14),e.EFF(26,"\u25b2"),e.k0s()(),e.j41(27,"th",15),e.EFF(28,"Tipo Doc."),e.k0s(),e.j41(29,"th",15),e.EFF(30,"Req. # Documento"),e.k0s(),e.j41(31,"th",15),e.EFF(32,"Req. Hoja Neg."),e.k0s(),e.j41(33,"th",15),e.EFF(34,"Req. Cod. Cliente"),e.k0s(),e.j41(35,"th",15),e.EFF(36,"Estado"),e.k0s()()(),e.j41(37,"tbody"),e.DNE(38,R,15,14,"tr",16),e.nI1(39,"filterBy"),e.k0s()(),e.j41(40,"div",17)(41,"ngb-pagination",18,0),e.mxI("pageChange",function(m){return e.eBV(a),e.DH7(n.page,m)||(n.page=m),e.Njj(m)}),e.bIt("pageChange",function(m){return e.eBV(a),e.Njj(n.onPageChange(m,n.pageSize))}),e.DNE(43,A,1,0,"ng-template",19)(44,v,1,0,"ng-template",20),e.k0s(),e.DNE(45,k,3,0,"div",21),e.j41(46,"select",22),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pageSize,m)||(n.pageSize=m),e.Njj(m)}),e.j41(47,"option",23),e.EFF(48,"2 items por p\xe1gina"),e.k0s(),e.j41(49,"option",23),e.EFF(50,"4 items por p\xe1gina"),e.k0s(),e.j41(51,"option",23),e.EFF(52,"6 items por p\xe1gina"),e.k0s()()(),e.j41(53,"div",24)(54,"div",25)(55,"button",26),e.bIt("click",function(){e.eBV(a);const m=e.sdS(58);return n.onBtnNuevoClic(),e.Njj(n.open(m))}),e.EFF(56," Nuevo registro "),e.k0s()()()()(),e.DNE(57,V,72,12,"ng-template",null,1,e.C5r)(59,q,18,0,"ng-template",null,2,e.C5r),e.k0s()}2&r&&(e.R7$(11),e.R50("ngModel",n.searchText),e.R7$(6),e.Y8G("hidden",""==n.columnaActual||"codigolinea"!=n.columnaActual||"codigolinea"==n.columnaActual&&1==n.tipoOrdenActual),e.R7$(2),e.Y8G("hidden",""==n.columnaActual||"codigolinea"!=n.columnaActual||"codigolinea"==n.columnaActual&&0==n.tipoOrdenActual),e.R7$(4),e.Y8G("hidden",""==n.columnaActual||"sistema"!=n.columnaActual||"sistema"==n.columnaActual&&1==n.tipoOrdenActual),e.R7$(2),e.Y8G("hidden",""==n.columnaActual||"sistema"!=n.columnaActual||"sistema"==n.columnaActual&&0==n.tipoOrdenActual),e.R7$(13),e.Y8G("ngForOf",e.i5U(39,14,n.obtenerRegistros,n.filtroTabla)),e.R7$(3),e.Y8G("collectionSize",n.collectionSize),e.R50("page",n.page),e.Y8G("pageSize",n.pageSize),e.R7$(4),e.Y8G("ngIf",n.siCargandoDatos),e.R7$(),e.R50("ngModel",n.pageSize),e.R7$(),e.Y8G("ngValue",2),e.R7$(2),e.Y8G("ngValue",4),e.R7$(2),e.Y8G("ngValue",6))},dependencies:[E.Sq,E.bT,d.Cv,d.s5,d.PB,d.hO,d.Qr,O.qT,O.xH,O.y7,O.me,O.wz,O.BC,O.cb,O.xh,O.tU,O.R_,O.vS,O.cV,D.L],styles:["@media (min-width: 1281px){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}@media (min-width: 1025px) and (max-width: 1280px){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}@media (min-width: 768px) and (max-width: 1024px){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}@media (min-width: 481px) and (max-width: 767px){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}@media (min-width: 320px) and (max-width: 480px){.divContenedor[_ngcontent-%COMP%]{min-height:400px;border-right:1px solid #a9b9cd!important;border-left:1px solid #a9b9cd!important;border-bottom:1px solid #a9b9cd!important;border-bottom-left-radius:.6rem!important;border-bottom-right-radius:.6rem!important;background-color:#fff;padding-left:1%}.table.table-striped.table-hover.table-bordered.table-sm[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{font-size:.688rem!important}}"]})}return c})();const Y=[{path:"",component:(()=>{class c{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||c)};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["app-lineasisdoc"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,n){1&r&&(e.j41(0,"div",0),e.nrm(1,"app-header")(2,"app-menu")(3,"app-cont-config-lineasisdoc")(4,"app-footer"),e.k0s())},dependencies:[l.l,b.n,o.Z,z]})}return c})()}];let $=(()=>{class c{static#e=this.\u0275fac=function(r){return new(r||c)};static#t=this.\u0275mod=e.$C({type:c});static#n=this.\u0275inj=e.G2t({imports:[C.iI.forChild(Y),C.iI]})}return c})();var w=g(1269),J=g(764);let X=(()=>{class c{static#e=this.\u0275fac=function(r){return new(r||c)};static#t=this.\u0275mod=e.$C({type:c});static#n=this.\u0275inj=e.G2t({providers:[E.QX,J.g],imports:[E.MD,$,d.UN,w.X,O.YN,D.x,f.R]})}return c})()},764:(T,j,g)=>{g.d(j,{g:()=>C});class C{}},3020:(T,j,g)=>{g.d(j,{B:()=>e});var E=g(762),C=g(484);function e(i,s=C.b){return d=>d.lift(new l(i,s))}class l{constructor(s,d){this.dueTime=s,this.scheduler=d}call(s,d){return d.subscribe(new b(s,this.dueTime,this.scheduler))}}class b extends E.v{constructor(s,d,p){super(s),this.dueTime=d,this.scheduler=p,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(s){this.clearDebounce(),this.lastValue=s,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(o,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:s}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(s)}}clearDebounce(){const s=this.debouncedSubscription;null!==s&&(this.remove(s),s.unsubscribe(),this.debouncedSubscription=null)}}function o(i){i.debouncedNext()}},5122:(T,j,g)=>{g.d(j,{L:()=>C,x:()=>e});var E=g(4438);let C=(()=>{class l{static isFoundOnWalking(o,i){let s=o,d=!1;do{if(s.hasOwnProperty(i)||Object.getOwnPropertyDescriptor(s,i)){d=!0;break}}while(s=Object.getPrototypeOf(s));return d}static isNumber(o){return!isNaN(parseInt(o,10))&&isFinite(o)}static getValue(o){return"function"==typeof o?o():o}filterByString(o){return o&&(o=o.toLowerCase()),i=>!o||!!i&&-1!==(""+i).toLowerCase().indexOf(o)}filterByBoolean(o){return i=>!!i===o}filterByObject(o){return i=>{for(const s in o)if("$or"!==s){if(!i||!l.isFoundOnWalking(i,s)||!this.isMatching(o[s],l.getValue(i[s])))return!1}else if(!this.filterByOr(o.$or)(l.getValue(i)))return!1;return!0}}isMatching(o,i){switch(typeof o){case"boolean":return this.filterByBoolean(o)(i);case"string":return this.filterByString(o)(i);case"object":return this.filterByObject(o)(i)}return this.filterDefault(o)(i)}filterByOr(o){return i=>{const s=o.length,_=Array.isArray(i)?f=>-1!==i.indexOf(o[f]):f=>this.isMatching(o[f],i);for(let f=0;f<s;f++)if(_(f))return!0;return!1}}filterDefault(o){return i=>void 0===o||o==i}transform(o,i){if(!o)return o;switch(typeof i){case"boolean":return o.filter(this.filterByBoolean(i));case"string":return l.isNumber(i)?o.filter(this.filterDefault(i)):o.filter(this.filterByString(i));case"object":return o.filter(this.filterByObject(i));case"function":return o.filter(i)}return o.filter(this.filterDefault(i))}static \u0275fac=function(i){return new(i||l)};static \u0275pipe=E.EJ8({name:"filterBy",type:l,pure:!1});static \u0275prov=E.jDH({token:l,factory:l.\u0275fac})}return l})(),e=(()=>{class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=E.$C({type:l});static \u0275inj=E.G2t({providers:[C]})}return l})()},5874:(T,j,g)=>{g.d(j,{F:()=>C,R:()=>e});var E=g(4438);let C=(()=>{class l{static isString(o){return"string"==typeof o||o instanceof String}static caseInsensitiveSort(o,i){return l.isString(o)&&l.isString(i)?o.localeCompare(i):l.defaultCompare(o,i)}static defaultCompare(o,i){return o&&o instanceof Date&&(o=o.getTime()),i&&i instanceof Date&&(i=i.getTime()),o===i?0:null==o?1:null==i?-1:o>i?1:-1}static parseExpression(o){return(o=(o=o.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")}static getValue(o,i){for(let s=0,d=i.length;s<d;++s){if(!o)return;const p=i[s];if(!(p in o))return;o="function"==typeof o[p]?o[p]():o[p]}return o}static setValue(o,i,s){let d;for(d=0;d<s.length-1;d++)o=o[s[d]];o[s[d]]=i}transform(o,i,s,d=!1,p){return o&&(Array.isArray(i)?this.multiExpressionTransform(o,i.slice(),s,d,p):Array.isArray(o)?this.sortArray(o.slice(),i,s,d,p):"object"==typeof o?this.transformObject(Object.assign({},o),i,s,d,p):o)}sortArray(o,i,s,d,p){const _=i&&-1!==i.indexOf(".");let f;_&&(i=l.parseExpression(i)),f=p&&"function"==typeof p?p:d?l.caseInsensitiveSort:l.defaultCompare;const D=o.sort((P,u)=>i?_?f(l.getValue(P,i),l.getValue(u,i)):P&&u?f(P[i],u[i]):f(P,u):f(P,u));return s?D.reverse():D}transformObject(o,i,s,d,p){const _=l.parseExpression(i);let f=_.pop(),D=l.getValue(o,_);return Array.isArray(D)||(_.push(f),f=null,D=l.getValue(o,_)),D&&l.setValue(o,this.transform(D,f,s,d),_),o}multiExpressionTransform(o,i,s,d=!1,p){return i.reverse().reduce((_,f)=>this.transform(_,f,s,d,p),o)}static \u0275fac=function(i){return new(i||l)};static \u0275pipe=E.EJ8({name:"orderBy",type:l,pure:!1})}return l})(),e=(()=>{class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=E.$C({type:l});static \u0275inj=E.G2t({providers:[C]})}return l})()}}]);